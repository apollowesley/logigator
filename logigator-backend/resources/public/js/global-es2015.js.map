{"version":3,"sources":["global-es2015.js","global.js","bem.js","global-functions.js"],"names":["siteHeaderPartial","node","settingsDropdown","querySelector","dropdownBackground","Bem","element","dropdownOpen","addEventListener","setState","setBurgerMenuState","popupPartial","opened","hasState","dataTriggers","data","split","forEach","trigger","document","elements","elem","burgerMenuBackgroundElement","window","bemClass","classList","length","i","includes","concat","querySelectorAll","state","active","add","remove","contains","toggleState","toggle","hasModifier","modifier","getAttribute","hasData","hasAttribute","open","burgerMenu","burgerMenuBackground","undefined","debounceFunction","func","debounce","timeout","context","this","args","arguments","later","apply","clearTimeout","setTimeout","openDynamicPopup","async","popupUrl","insertionPoint","formDataPostUrl","resp","fetch","innerHTML","text","popupElem","firstChild","removeChild","lastChild","popup"],"mappings":"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","file":"global-es2015.js","sourcesContent":[null,"// PARTIALS ---------------------------------------------------------------------------------------\n\n/**\n * @param {HTMLElement} node\n */\nfunction siteHeaderPartial(node) {\n\tconst settingsDropdown = node.querySelector('.partial-settings-dropdown');\n\tconst dropdownBackground = Bem.element(node, 'dropdown-background');\n\n\tlet dropdownOpen = false;\n\tBem.element(node, 'dropdown-trigger').addEventListener('click', () => {\n\t\tdropdownOpen = !dropdownOpen;\n\t\tBem.setState(settingsDropdown, 'open', dropdownOpen);\n\t\tBem.setState(dropdownBackground, 'shown', dropdownOpen);\n\t});\n\n\tdropdownBackground.addEventListener('click', () => {\n\t\tdropdownOpen = false;\n\t\tBem.setState(settingsDropdown, 'open', dropdownOpen);\n\t\tBem.setState(dropdownBackground, 'shown', dropdownOpen);\n\t});\n\n\tBem.element(node, 'burger-menu').addEventListener('click', () => setBurgerMenuState());\n}\nsiteHeaderPartial(document.querySelector('.partial-site-header'));\n\n// ------------------------------------------------------------------------------------------------\n\n/**\n * @param {HTMLElement} node\n */\nfunction popupPartial(node) {\n\tlet opened = Bem.hasState(node, 'open');\n\n\tconst dataTriggers = Bem.data(node, 'triggers');\n\n\tif (dataTriggers) {\n\t\tconst triggers = dataTriggers.split('::');\n\t\ttriggers.forEach(trigger => {\n\t\t\tdocument.querySelector(trigger).addEventListener('click', () => {\n\t\t\t\tif (!opened) {\n\t\t\t\t\tBem.setState(node, 'open', true);\n\t\t\t\t\topened = true;\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tBem.elements(node, 'close').forEach(elem => {\n\t\telem.addEventListener('click', () => {\n\t\t\tBem.setState(node, 'open', false);\n\t\t\topened = false;\n\t\t});\n\t});\n}\ndocument.querySelectorAll('.partial-popup').forEach(popup => popupPartial(popup));\n\n// ------------------------------------------------------------------------------------------------\n\n/**\n * @param {HTMLElement} node\n */\nfunction burgerMenuBackgroundElement(node) {\n\tnode.addEventListener('click', () => setBurgerMenuState(false));\n}\nburgerMenuBackgroundElement(document.querySelector('.partial-burger-menu__background'));\n\n// ------------------------------------------------------------------------------------------------\n","window.Bem = {\n\n    /**\n     * @param {Element} node\n     * @returns {string}\n     */\n    bemClass(node) {\n        if (node.classList.length === 1) {\n            return node.classList[0];\n        } else {\n            for (let i = 0; i < node.classList.length; i++) {\n                if (!node.classList[i].includes('--')) {\n                    return node.classList[i];\n                }\n            }\n            return undefined;\n        }\n    },\n\n    /**\n     * @param {Element} node\n     * @param {string} element\n     * @returns {Element}\n     */\n    element(node, element) {\n        const bemClass = Bem.bemClass(node);\n        return node.querySelector(`.${bemClass}__${element}`);\n    },\n\n\t/**\n\t * @param {Element} node\n\t * @param {string} element\n\t * @returns {NodeList<HTMLElement>}\n\t */\n\telements(node, element) {\n\t\tconst bemClass = Bem.bemClass(node);\n\t\treturn node.querySelectorAll(`.${bemClass}__${element}`);\n\t},\n\n    /**\n     * @param {Element} node\n     * @param {string} state\n     * @param {boolean} active\n     */\n    setState(node, state, active) {\n        if (active) {\n            node.classList.add(`is-${state}`);\n        } else {\n            node.classList.remove(`is-${state}`);\n        }\n    },\n\n    /**\n     * @param {Element} node\n     * @param {string} state\n     * @returns {boolean}\n     */\n    hasState(node, state) {\n        return node.classList.contains(`is-${state}`);\n    },\n\n    /**\n     * @param {Element} node\n     * @param {string} state\n     */\n    toggleState(node, state) {\n        node.classList.toggle(`is-${state}`);\n    },\n\n    /**\n     * @param {Element} node\n     * @param {string} modifier\n     * @returns {boolean}\n     */\n    hasModifier(node, modifier) {\n        const bemClass = Bem.bemClass(node);\n        return node.classList.contains(`${bemClass}--${modifier}`);\n    },\n\n    /**\n     * @param {Element} node\n     * @param {string} data\n     * @returns {string}\n     */\n    data(node, data) {\n        return node.getAttribute(`data-${data}`);\n    },\n\n    /**\n     * @param {Element} node\n     * @param {string} data\n     * @returns {boolean}\n     */\n    hasData(node, data) {\n        return node.hasAttribute(`data-${data}`);\n    }\n};\n","/**\n * @param {boolean?} open toggle if undefined\n */\nwindow.setBurgerMenuState = function (open) {\n\tconst burgerMenu = document.querySelector('.partial-burger-menu');\n\tconst burgerMenuBackground = document.querySelector('.partial-burger-menu__background');\n\tif (open !== undefined) {\n\t\tBem.setState(burgerMenu, 'open', open);\n\t\tBem.setState(burgerMenuBackground, 'open', open);\n\t} else {\n\t\topen = !Bem.hasState(burgerMenu, 'open');\n\t\tBem.setState(burgerMenu, 'open', open);\n\t\tBem.setState(burgerMenuBackground, 'open', open);\n\t}\n};\n\n/**\n * @param {Function} func\n * @param {number} debounce\n * @return {Function}\n */\nwindow.debounceFunction = function (func, debounce) {\n\tlet timeout;\n\n\treturn function() {\n\t\tconst context = this;\n\t\tconst args = arguments;\n\n\t\tconst later = function() {\n\t\t\ttimeout = null;\n\t\t\tfunc.apply(context, args);\n\t\t};\n\n\t\tclearTimeout(timeout);\n\t\ttimeout = setTimeout(later, debounce);\n\t};\n};\n\n/**\n * @param {string} popupUrl\n * @param {Element} insertionPoint\n * @param {string} [formDataPostUrl]\n */\nwindow.openDynamicPopup = async function (popupUrl, insertionPoint, formDataPostUrl) {\n\tconst resp = await fetch(popupUrl);\n\tinsertionPoint.innerHTML = await resp.text();\n\tconst popupElem = insertionPoint.querySelector('.partial-popup');\n\tBem.elements(popupElem, 'close').forEach(elem => {\n\t\telem.addEventListener('click', () => {\n\t\t\twhile (insertionPoint.firstChild) {\n\t\t\t\tinsertionPoint.removeChild(insertionPoint.lastChild);\n\t\t\t}\n\t\t});\n\t});\n};\n"]}