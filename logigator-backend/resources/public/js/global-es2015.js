"use strict";function siteHeaderPartial(e){const t=e.querySelector(".partial-settings-dropdown"),n=Bem.element(e,"dropdown-background");let o=!1;Bem.element(e,"dropdown-trigger").addEventListener("click",()=>{o=!o,Bem.setState(t,"open",o),Bem.setState(n,"shown",o)}),n.addEventListener("click",()=>{o=!1,Bem.setState(t,"open",o),Bem.setState(n,"shown",o)}),Bem.element(e,"burger-menu").addEventListener("click",()=>setBurgerMenuState())}function popupPartial(e){let t=Bem.hasState(e,"open");const n=Bem.data(e,"triggers");if(n){n.split("::").forEach(n=>{document.querySelector(n).addEventListener("click",()=>{t||(Bem.setState(e,"open",!0),t=!0)})})}Bem.elements(e,"close").forEach(n=>{n.addEventListener("click",()=>{Bem.setState(e,"open",!1),t=!1})})}function burgerMenuBackgroundElement(e){e.addEventListener("click",()=>setBurgerMenuState(!1))}function formValidationForGlobalForms(e){e.querySelector('button[type="submit"]')&&startFormValidation(e)}window.Bem={bemClass(e){if(1===e.classList.length)return e.classList[0];for(let t=0;t<e.classList.length;t++)if(!e.classList[t].includes("--"))return e.classList[t]},element(e,t){const n=Bem.bemClass(e);return e.querySelector(".".concat(n,"__").concat(t))},elements(e,t){const n=Bem.bemClass(e);return e.querySelectorAll(".".concat(n,"__").concat(t))},setState(e,t,n){n?e.classList.add("is-".concat(t)):e.classList.remove("is-".concat(t))},hasState:(e,t)=>e.classList.contains("is-".concat(t)),toggleState(e,t){e.classList.toggle("is-".concat(t))},hasModifier(e,t){const n=Bem.bemClass(e);return e.classList.contains("".concat(n,"--").concat(t))},data:(e,t)=>e.getAttribute("data-".concat(t)),hasData:(e,t)=>e.hasAttribute("data-".concat(t))},window.setBurgerMenuState=function(e){const t=document.querySelector(".partial-burger-menu"),n=document.querySelector(".partial-burger-menu__background");void 0!==e?(Bem.setState(t,"open",e),Bem.setState(n,"open",e)):(e=!Bem.hasState(t,"open"),Bem.setState(t,"open",e),Bem.setState(n,"open",e))},window.debounceFunction=function(e,t){let n;return function(){const o=this,r=arguments,a=function(){n=null,e.apply(o,r)};clearTimeout(n),n=setTimeout(a,t)}},window.startFormValidation=function(e){const t={isNotEmpty:e=>null!=e&&""!==e,minLength:(e,t)=>e.length>=Number(t),maxLength:(e,t)=>e.length<=Number(t),isEmail:e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),matches:(e,t)=>new RegExp(t).test(e),matchesProperty:(e,t,n)=>n.namedItem(t).value===e},n=e.querySelector('button[type="submit"]'),o=e.elements,r=function(e){const n=[];for(const o of e){if(o instanceof HTMLButtonElement)continue;const e={formContainer:o.closest("div[form-container]"),element:o,touched:!1,valid:!1,errors:[]},r=e.formContainer.querySelector("div[form-errors]").children;for(const n of r){const o=n.getAttribute("data-error");o in t&&e.errors.push({errorName:o,valData:n.getAttribute("data-val-data"),errorMessage:n})}n.push(e)}return n}(o);for(const e of r)a(e,Bem.hasState(e.formContainer,"invalid")),e.element.addEventListener("input",()=>{e.touched=!0,a(e)});function a(e,a){e.valid=!0,e.errors.forEach(n=>{const r=t[n.errorName](e.element.value,n.valData,o);r||(e.valid=!1),Bem.setState(n.errorMessage,"shown",!r&&e.touched)}),Bem.setState(e.formContainer,"invalid",a||!e.valid&&e.touched),n.disabled=!r.every(e=>e.valid)}},window.openDynamicPopup=async function(e,t){const n=await fetch(e);t.innerHTML=await n.text(),function e(){const n=t.querySelector(".partial-popup");Bem.elements(n,"close").forEach(e=>{e.addEventListener("click",()=>{for(;t.firstChild;)t.removeChild(t.lastChild)})});const o=n.querySelector("form");if(!o)return;startFormValidation(o),o.addEventListener("submit",async n=>{var r;n.preventDefault();const a=await fetch(null!==(r=n.submitter.getAttribute("formaction"))&&void 0!==r?r:o.action,{method:o.method,headers:{"Content-Type":"application/x-www-form-urlencoded"},redirect:"follow",body:new URLSearchParams(new FormData(o))});a.redirected?(t.innerHTML=await a.text(),e()):location.reload()})}()},siteHeaderPartial(document.querySelector(".partial-site-header")),document.querySelectorAll(".partial-popup").forEach(e=>popupPartial(e)),burgerMenuBackgroundElement(document.querySelector(".partial-burger-menu__background")),document.querySelectorAll("form").forEach(e=>formValidationForGlobalForms(e));
//# sourceMappingURL=global-es2015.js.map
